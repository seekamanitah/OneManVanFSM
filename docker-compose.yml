services:
web:
  build:
    context: .
    dockerfile: Dockerfile
  container_name: onemanvanfsm-web-test
  env_file:
    - .env
  ports:
    - "${WEBUI_PORT:-6000}:8080"
  environment:
    - ASPNETCORE_ENVIRONMENT=${ASPNETCORE_ENVIRONMENT:-Production}
    - ConnectionStrings__DefaultConnection=Data Source=/app/data/${APP_DB_NAME:-OneManVanFSM_Test}.db
    - ADMIN_EMAIL=${ADMIN_EMAIL:-}
    - ADMIN_PASSWORD=${ADMIN_PASSWORD:-}
  volumes:
    - /media/AppDatabases/OneManVanFSMData_Test:/app/data
  restart: unless-stopped
  healthcheck:
    test: ["CMD", "curl", "-f", "http://localhost:8080/health"]
    interval: 30s
    timeout: 10s
    retries: 3
    start_period: 40s
