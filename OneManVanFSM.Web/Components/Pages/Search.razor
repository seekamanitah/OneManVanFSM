@page "/search"
@rendermode InteractiveServer
@inject ICustomerService CustomerSvc
@inject IJobService JobSvc
@inject ISiteService SiteSvc
@inject IEstimateService EstimateSvc
@inject IAssetService AssetSvc
@inject IEmployeeService EmployeeSvc
@inject IFinancialService FinancialSvc
@inject IDocumentService DocSvc
@inject IServiceAgreementService AgreementSvc
@inject IProductService ProductSvc
@inject NavigationManager Navigation

<PageTitle>Search Results - OneManVanFSM</PageTitle>

<div class="d-flex align-items-center mb-3">
    <h4 class="mb-0"><i class="bi bi-search me-2"></i>Search Results</h4>
    @if (!string.IsNullOrWhiteSpace(_query))
    {
        <span class="badge bg-secondary ms-3 fs-6">@_query</span>
        @if (_hasResults)
        {
            <small class="text-muted ms-2">@TotalCount results</small>
        }
    }
</div>

@if (_loading)
{
    <div class="text-center py-5">
        <div class="spinner-border text-primary" role="status"></div>
        <p class="text-muted mt-2">Searching across all entities...</p>
    </div>
}
else if (string.IsNullOrWhiteSpace(_query))
{
    <div class="text-center py-5 text-muted">
        <i class="bi bi-search" style="font-size: 3rem;"></i>
        <p class="mt-3">Enter a search term in the header search bar to find across all entities.</p>
        <div class="d-flex flex-wrap justify-content-center gap-2 mt-2">
            <span class="badge bg-light text-dark border">Jobs</span>
            <span class="badge bg-light text-dark border">Customers</span>
            <span class="badge bg-light text-dark border">Sites</span>
            <span class="badge bg-light text-dark border">Estimates</span>
            <span class="badge bg-light text-dark border">Assets</span>
            <span class="badge bg-light text-dark border">Employees</span>
            <span class="badge bg-light text-dark border">Invoices</span>
            <span class="badge bg-light text-dark border">Documents</span>
            <span class="badge bg-light text-dark border">Agreements</span>
            <span class="badge bg-light text-dark border">Products</span>
        </div>
    </div>
}
else
{
    @if (!_hasResults)
    {
        <div class="text-center py-5 text-muted">
            <i class="bi bi-emoji-frown" style="font-size: 3rem;"></i>
            <p class="mt-3">No results found for "<strong>@_query</strong>".</p>
            <p class="small">Try searching with different keywords.</p>
        </div>
    }
    else
    {
        <div class="d-flex flex-wrap gap-2 mb-3">
            <button class="btn btn-sm @(_filterCategory is null ? "btn-primary" : "btn-outline-secondary")" @onclick="() => _filterCategory = null">
                All <span class="badge bg-white text-dark ms-1">@TotalCount</span>
            </button>
            @if (_jobs.Count > 0)
            {
                <button class="btn btn-sm @(_filterCategory == "jobs" ? "btn-primary" : "btn-outline-secondary")" @onclick='() => _filterCategory = "jobs"'>
                    <i class="bi bi-briefcase me-1"></i>Jobs <span class="badge bg-white text-dark ms-1">@_jobs.Count</span>
                </button>
            }
            @if (_customers.Count > 0)
            {
                <button class="btn btn-sm @(_filterCategory == "customers" ? "btn-primary" : "btn-outline-secondary")" @onclick='() => _filterCategory = "customers"'>
                    <i class="bi bi-people me-1"></i>Customers <span class="badge bg-white text-dark ms-1">@_customers.Count</span>
                </button>
            }
            @if (_sites.Count > 0)
            {
                <button class="btn btn-sm @(_filterCategory == "sites" ? "btn-primary" : "btn-outline-secondary")" @onclick='() => _filterCategory = "sites"'>
                    <i class="bi bi-geo-alt me-1"></i>Sites <span class="badge bg-white text-dark ms-1">@_sites.Count</span>
                </button>
            }
            @if (_estimates.Count > 0)
            {
                <button class="btn btn-sm @(_filterCategory == "estimates" ? "btn-primary" : "btn-outline-secondary")" @onclick='() => _filterCategory = "estimates"'>
                    <i class="bi bi-calculator me-1"></i>Estimates <span class="badge bg-white text-dark ms-1">@_estimates.Count</span>
                </button>
            }
            @if (_assets.Count > 0)
            {
                <button class="btn btn-sm @(_filterCategory == "assets" ? "btn-primary" : "btn-outline-secondary")" @onclick='() => _filterCategory = "assets"'>
                    <i class="bi bi-cpu me-1"></i>Assets <span class="badge bg-white text-dark ms-1">@_assets.Count</span>
                </button>
            }
            @if (_employees.Count > 0)
            {
                <button class="btn btn-sm @(_filterCategory == "employees" ? "btn-primary" : "btn-outline-secondary")" @onclick='() => _filterCategory = "employees"'>
                    <i class="bi bi-person-badge me-1"></i>Employees <span class="badge bg-white text-dark ms-1">@_employees.Count</span>
                </button>
            }
            @if (_invoices.Count > 0)
            {
                <button class="btn btn-sm @(_filterCategory == "invoices" ? "btn-primary" : "btn-outline-secondary")" @onclick='() => _filterCategory = "invoices"'>
                    <i class="bi bi-receipt me-1"></i>Invoices <span class="badge bg-white text-dark ms-1">@_invoices.Count</span>
                </button>
            }
            @if (_documents.Count > 0)
            {
                <button class="btn btn-sm @(_filterCategory == "documents" ? "btn-primary" : "btn-outline-secondary")" @onclick='() => _filterCategory = "documents"'>
                    <i class="bi bi-folder me-1"></i>Documents <span class="badge bg-white text-dark ms-1">@_documents.Count</span>
                </button>
            }
            @if (_agreements.Count > 0)
            {
                <button class="btn btn-sm @(_filterCategory == "agreements" ? "btn-primary" : "btn-outline-secondary")" @onclick='() => _filterCategory = "agreements"'>
                    <i class="bi bi-file-earmark-check me-1"></i>Agreements <span class="badge bg-white text-dark ms-1">@_agreements.Count</span>
                </button>
            }
            @if (_products.Count > 0)
            {
                <button class="btn btn-sm @(_filterCategory == "products" ? "btn-primary" : "btn-outline-secondary")" @onclick='() => _filterCategory = "products"'>
                    <i class="bi bi-box-seam me-1"></i>Products <span class="badge bg-white text-dark ms-1">@_products.Count</span>
                </button>
            }
        </div>

        @if (ShowSection("jobs") && _jobs.Count > 0)
        {
            <div class="card border-0 shadow-sm mb-3">
                <div class="card-header bg-white d-flex justify-content-between align-items-center">
                    <h6 class="mb-0"><i class="bi bi-briefcase-fill me-2 text-primary"></i>Jobs (@_jobs.Count)</h6>
                    <a href="/jobs" class="btn btn-sm btn-outline-primary">View All</a>
                </div>
                <div class="table-responsive">
                    <table class="table table-hover mb-0 align-middle">
                        <thead class="table-light"><tr><th>Job #</th><th>Title</th><th>Customer</th><th>Status</th><th>Priority</th><th>Scheduled</th></tr></thead>
                        <tbody>
                            @foreach (var job in _jobs)
                            {
                                <tr style="cursor:pointer" @onclick="@(() => GoTo("/jobs/" + job.Id))">
                                    <td><code>@job.JobNumber</code></td>
                                    <td><strong>@job.Title</strong></td>
                                    <td>@(job.CustomerName ?? "\u2014")</td>
                                    <td><span class="badge @GetJobStatusBadge(job.Status)">@job.Status</span></td>
                                    <td><span class="badge @GetPriorityBadge(job.Priority)">@job.Priority</span></td>
                                    <td>@(job.ScheduledDate?.ToString("MMM dd, yyyy") ?? "\u2014")</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        }

        @if (ShowSection("customers") && _customers.Count > 0)
        {
            <div class="card border-0 shadow-sm mb-3">
                <div class="card-header bg-white d-flex justify-content-between align-items-center">
                    <h6 class="mb-0"><i class="bi bi-people-fill me-2 text-success"></i>Customers (@_customers.Count)</h6>
                    <a href="/customers" class="btn btn-sm btn-outline-primary">View All</a>
                </div>
                <div class="table-responsive">
                    <table class="table table-hover mb-0 align-middle">
                        <thead class="table-light"><tr><th>Name</th><th>Type</th><th>Phone</th><th>Email</th><th>Open Jobs</th></tr></thead>
                        <tbody>
                            @foreach (var c in _customers)
                            {
                                <tr style="cursor:pointer" @onclick="@(() => GoTo("/customers/" + c.Id))">
                                    <td><strong>@c.Name</strong></td>
                                    <td><span class="badge bg-secondary">@c.Type</span></td>
                                    <td>@(c.PrimaryPhone ?? "\u2014")</td>
                                    <td>@(c.PrimaryEmail ?? "\u2014")</td>
                                    <td>@c.OpenJobCount</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        }

        @if (ShowSection("sites") && _sites.Count > 0)
        {
            <div class="card border-0 shadow-sm mb-3">
                <div class="card-header bg-white d-flex justify-content-between align-items-center">
                    <h6 class="mb-0"><i class="bi bi-geo-alt-fill me-2 text-danger"></i>Sites (@_sites.Count)</h6>
                    <a href="/sites" class="btn btn-sm btn-outline-primary">View All</a>
                </div>
                <div class="table-responsive">
                    <table class="table table-hover mb-0 align-middle">
                        <thead class="table-light"><tr><th>Name</th><th>Address</th><th>City</th><th>Type</th><th>Assets</th></tr></thead>
                        <tbody>
                            @foreach (var s in _sites)
                            {
                                <tr style="cursor:pointer" @onclick="@(() => GoTo("/sites/" + s.Id))">
                                    <td><strong>@s.Name</strong></td>
                                    <td>@(s.Address ?? "\u2014")</td>
                                    <td>@(s.City ?? "\u2014")</td>
                                    <td><span class="badge bg-secondary">@s.PropertyType</span></td>
                                    <td>@s.AssetCount</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        }

        @if (ShowSection("estimates") && _estimates.Count > 0)
        {
            <div class="card border-0 shadow-sm mb-3">
                <div class="card-header bg-white d-flex justify-content-between align-items-center">
                    <h6 class="mb-0"><i class="bi bi-calculator-fill me-2 text-info"></i>Estimates (@_estimates.Count)</h6>
                    <a href="/estimates" class="btn btn-sm btn-outline-primary">View All</a>
                </div>
                <div class="table-responsive">
                    <table class="table table-hover mb-0 align-middle">
                        <thead class="table-light"><tr><th>Estimate #</th><th>Title</th><th>Customer</th><th>Status</th><th>Total</th></tr></thead>
                        <tbody>
                            @foreach (var est in _estimates)
                            {
                                <tr style="cursor:pointer" @onclick="@(() => GoTo("/estimates/" + est.Id))">
                                    <td><code>@est.EstimateNumber</code></td>
                                    <td><strong>@est.Title</strong></td>
                                    <td>@(est.CustomerName ?? "\u2014")</td>
                                    <td><span class="badge bg-info">@est.Status</span></td>
                                    <td>@est.Total.ToString("C")</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        }

        @if (ShowSection("assets") && _assets.Count > 0)
        {
            <div class="card border-0 shadow-sm mb-3">
                <div class="card-header bg-white d-flex justify-content-between align-items-center">
                    <h6 class="mb-0"><i class="bi bi-cpu-fill me-2 text-warning"></i>Assets (@_assets.Count)</h6>
                    <a href="/assets" class="btn btn-sm btn-outline-primary">View All</a>
                </div>
                <div class="table-responsive">
                    <table class="table table-hover mb-0 align-middle">
                        <thead class="table-light"><tr><th>Name</th><th>Type</th><th>Model</th><th>Serial #</th><th>Status</th><th>Customer</th></tr></thead>
                        <tbody>
                            @foreach (var a in _assets)
                            {
                                <tr style="cursor:pointer" @onclick="@(() => GoTo("/assets/" + a.Id))">
                                    <td><strong>@a.Name</strong></td>
                                    <td>@(a.AssetType ?? "\u2014")</td>
                                    <td>@(a.Model ?? "\u2014")</td>
                                    <td><code>@(a.SerialNumber ?? "\u2014")</code></td>
                                    <td><span class="badge @GetAssetStatusBadge(a.Status)">@a.Status</span></td>
                                    <td>@(a.CustomerName ?? "\u2014")</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        }

        @if (ShowSection("employees") && _employees.Count > 0)
        {
            <div class="card border-0 shadow-sm mb-3">
                <div class="card-header bg-white d-flex justify-content-between align-items-center">
                    <h6 class="mb-0"><i class="bi bi-person-badge-fill me-2 text-primary"></i>Employees (@_employees.Count)</h6>
                    <a href="/employees" class="btn btn-sm btn-outline-primary">View All</a>
                </div>
                <div class="table-responsive">
                    <table class="table table-hover mb-0 align-middle">
                        <thead class="table-light"><tr><th>Name</th><th>Role</th><th>Status</th><th>Phone</th><th>Territory</th></tr></thead>
                        <tbody>
                            @foreach (var emp in _employees)
                            {
                                <tr style="cursor:pointer" @onclick="@(() => GoTo("/employees/" + emp.Id))">
                                    <td><strong>@emp.Name</strong></td>
                                    <td><span class="badge bg-primary">@emp.Role</span></td>
                                    <td><span class="badge @GetEmployeeStatusBadge(emp.Status)">@emp.Status</span></td>
                                    <td>@(emp.Phone ?? "\u2014")</td>
                                    <td>@(emp.Territory ?? "\u2014")</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        }

        @if (ShowSection("invoices") && _invoices.Count > 0)
        {
            <div class="card border-0 shadow-sm mb-3">
                <div class="card-header bg-white d-flex justify-content-between align-items-center">
                    <h6 class="mb-0"><i class="bi bi-receipt me-2 text-success"></i>Invoices (@_invoices.Count)</h6>
                    <a href="/financials" class="btn btn-sm btn-outline-primary">View All</a>
                </div>
                <div class="table-responsive">
                    <table class="table table-hover mb-0 align-middle">
                        <thead class="table-light"><tr><th>Invoice #</th><th>Customer</th><th>Status</th><th>Total</th><th>Balance Due</th><th>Date</th></tr></thead>
                        <tbody>
                            @foreach (var inv in _invoices)
                            {
                                <tr style="cursor:pointer" @onclick="@(() => GoTo("/financials/invoices/" + inv.Id))">
                                    <td><code>@inv.InvoiceNumber</code></td>
                                    <td>@(inv.CustomerName ?? "\u2014")</td>
                                    <td><span class="badge @GetInvoiceStatusBadge(inv.Status)">@inv.Status</span></td>
                                    <td>@inv.Total.ToString("C")</td>
                                    <td class="@(inv.BalanceDue > 0 ? "text-danger fw-bold" : "")">@inv.BalanceDue.ToString("C")</td>
                                    <td>@(inv.InvoiceDate?.ToString("MMM dd, yyyy") ?? "\u2014")</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        }

        @if (ShowSection("documents") && _documents.Count > 0)
        {
            <div class="card border-0 shadow-sm mb-3">
                <div class="card-header bg-white d-flex justify-content-between align-items-center">
                    <h6 class="mb-0"><i class="bi bi-folder-fill me-2 text-warning"></i>Documents (@_documents.Count)</h6>
                    <a href="/documents" class="btn btn-sm btn-outline-primary">View All</a>
                </div>
                <div class="table-responsive">
                    <table class="table table-hover mb-0 align-middle">
                        <thead class="table-light"><tr><th>Name</th><th>Category</th><th>Type</th><th>Access</th><th>Customer</th><th>Uploaded</th></tr></thead>
                        <tbody>
                            @foreach (var doc in _documents)
                            {
                                <tr style="cursor:pointer" @onclick="@(() => GoTo("/documents/" + doc.Id))">
                                    <td><strong>@doc.Name</strong></td>
                                    <td><span class="badge bg-primary">@doc.Category</span></td>
                                    <td>@(doc.FileType ?? "\u2014")</td>
                                    <td><span class="badge @GetAccessBadge(doc.AccessLevel)">@doc.AccessLevel</span></td>
                                    <td>@(doc.CustomerName ?? "\u2014")</td>
                                    <td>@doc.UploadDate.ToString("MMM dd, yyyy")</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        }

        @if (ShowSection("agreements") && _agreements.Count > 0)
        {
            <div class="card border-0 shadow-sm mb-3">
                <div class="card-header bg-white d-flex justify-content-between align-items-center">
                    <h6 class="mb-0"><i class="bi bi-file-earmark-check-fill me-2 text-info"></i>Service Agreements (@_agreements.Count)</h6>
                    <a href="/serviceagreements" class="btn btn-sm btn-outline-primary">View All</a>
                </div>
                <div class="table-responsive">
                    <table class="table table-hover mb-0 align-middle">
                        <thead class="table-light"><tr><th>Agreement #</th><th>Title</th><th>Customer</th><th>Coverage</th><th>Status</th><th>End Date</th></tr></thead>
                        <tbody>
                            @foreach (var ag in _agreements)
                            {
                                <tr style="cursor:pointer" @onclick="@(() => GoTo("/serviceagreements/" + ag.Id))">
                                    <td><code>@ag.AgreementNumber</code></td>
                                    <td><strong>@ag.Title</strong></td>
                                    <td>@(ag.CustomerName ?? "\u2014")</td>
                                    <td><span class="badge bg-secondary">@ag.CoverageLevel</span></td>
                                    <td><span class="badge @GetAgreementStatusBadge(ag.Status)">@ag.Status</span></td>
                                    <td>@ag.EndDate.ToString("MMM dd, yyyy")</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        }

        @if (ShowSection("products") && _products.Count > 0)
        {
            <div class="card border-0 shadow-sm mb-3">
                <div class="card-header bg-white d-flex justify-content-between align-items-center">
                    <h6 class="mb-0"><i class="bi bi-box-seam-fill me-2 text-danger"></i>Products (@_products.Count)</h6>
                    <a href="/products" class="btn btn-sm btn-outline-primary">View All</a>
                </div>
                <div class="table-responsive">
                    <table class="table table-hover mb-0 align-middle">
                        <thead class="table-light"><tr><th>Name</th><th>Brand</th><th>Part #</th><th>Category</th><th>Price</th><th>Supplier</th></tr></thead>
                        <tbody>
                            @foreach (var p in _products)
                            {
                                <tr style="cursor:pointer" @onclick="@(() => GoTo("/products/" + p.Id))">
                                    <td><strong>@p.Name</strong></td>
                                    <td>@(p.Brand ?? "\u2014")</td>
                                    <td><code>@(p.PartNumber ?? "\u2014")</code></td>
                                    <td>@(p.Category ?? "\u2014")</td>
                                    <td>@p.Price.ToString("C")</td>
                                    <td>@(p.SupplierName ?? "\u2014")</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        }
    }
}

@code {
    [SupplyParameterFromQuery(Name = "q")]
    public string? Query { get; set; }

    private string _query = string.Empty;
    private bool _loading;
    private bool _hasResults;
    private string? _filterCategory;

    private List<JobListItem> _jobs = [];
    private List<CustomerListItem> _customers = [];
    private List<SiteListItem> _sites = [];
    private List<EstimateListItem> _estimates = [];
    private List<AssetListItem> _assets = [];
    private List<EmployeeListItem> _employees = [];
    private List<InvoiceListItem> _invoices = [];
    private List<DocumentListItem> _documents = [];
    private List<AgreementListItem> _agreements = [];
    private List<ProductListItem> _products = [];

    private int TotalCount => _jobs.Count + _customers.Count + _sites.Count + _estimates.Count
        + _assets.Count + _employees.Count + _invoices.Count + _documents.Count
        + _agreements.Count + _products.Count;

    protected override async Task OnParametersSetAsync()
    {
        _query = Query?.Trim() ?? string.Empty;
        _filterCategory = null;
        if (!string.IsNullOrWhiteSpace(_query))
        {
            await RunSearchAsync();
        }
    }

    private bool ShowSection(string category) => _filterCategory is null || _filterCategory == category;

    private void GoTo(string url) => Navigation.NavigateTo(url);

    private async Task RunSearchAsync()
    {
        _loading = true;
        StateHasChanged();

        try
        {
            var jobsTask = JobSvc.GetJobsAsync(new JobFilter { Search = _query });
            var customersTask = CustomerSvc.GetCustomersAsync(new CustomerFilter { Search = _query });
            var sitesTask = SiteSvc.GetSitesAsync(new SiteFilter { Search = _query });
            var estimatesTask = EstimateSvc.GetEstimatesAsync(new EstimateFilter { Search = _query });
            var assetsTask = AssetSvc.GetAssetsAsync(new AssetFilter { Search = _query });
            var employeesTask = EmployeeSvc.GetEmployeesAsync(new EmployeeFilter { Search = _query });
            var invoicesTask = FinancialSvc.GetInvoicesAsync(new InvoiceFilter { Search = _query });
            var documentsTask = DocSvc.GetDocumentsAsync(new DocumentFilter { Search = _query });
            var agreementsTask = AgreementSvc.GetAgreementsAsync(new AgreementFilter { Search = _query });
            var productsTask = ProductSvc.GetProductsAsync(new ProductFilter { Search = _query });

            await Task.WhenAll(jobsTask, customersTask, sitesTask, estimatesTask,
                assetsTask, employeesTask, invoicesTask, documentsTask, agreementsTask, productsTask);

            _jobs = jobsTask.Result;
            _customers = customersTask.Result;
            _sites = sitesTask.Result;
            _estimates = estimatesTask.Result;
            _assets = assetsTask.Result;
            _employees = employeesTask.Result;
            _invoices = invoicesTask.Result;
            _documents = documentsTask.Result;
            _agreements = agreementsTask.Result;
            _products = productsTask.Result;

            _hasResults = TotalCount > 0;
        }
        catch
        {
            _hasResults = false;
        }
        finally
        {
            _loading = false;
        }
    }

    private string GetJobStatusBadge(JobStatus s) => s switch
    {
        JobStatus.Completed or JobStatus.Closed => "bg-success",
        JobStatus.InProgress or JobStatus.OnSite => "bg-primary",
        JobStatus.Scheduled or JobStatus.EnRoute => "bg-info",
        JobStatus.Cancelled => "bg-danger",
        JobStatus.Paused => "bg-warning text-dark",
        _ => "bg-secondary"
    };

    private string GetPriorityBadge(JobPriority p) => p switch
    {
        JobPriority.Emergency => "bg-danger",
        JobPriority.High => "bg-warning text-dark",
        JobPriority.Standard => "bg-info",
        JobPriority.Low => "bg-secondary",
        _ => "bg-secondary"
    };

    private string GetAssetStatusBadge(AssetStatus s) => s switch
    {
        AssetStatus.Active => "bg-success",
        AssetStatus.MaintenanceNeeded => "bg-warning text-dark",
        AssetStatus.Retired => "bg-info",
        AssetStatus.Decommissioned => "bg-danger",
        _ => "bg-secondary"
    };

    private string GetEmployeeStatusBadge(EmployeeStatus s) => s switch
    {
        EmployeeStatus.Active => "bg-success",
        EmployeeStatus.OnLeave => "bg-warning text-dark",
        EmployeeStatus.Inactive or EmployeeStatus.Terminated => "bg-danger",
        _ => "bg-secondary"
    };

    private string GetInvoiceStatusBadge(InvoiceStatus s) => s switch
    {
        InvoiceStatus.Paid => "bg-success",
        InvoiceStatus.Sent or InvoiceStatus.Invoiced => "bg-primary",
        InvoiceStatus.Overdue => "bg-danger",
        InvoiceStatus.Void => "bg-dark",
        _ => "bg-secondary"
    };

    private string GetAccessBadge(DocumentAccessLevel level) => level switch
    {
        DocumentAccessLevel.Public => "bg-success",
        DocumentAccessLevel.Private => "bg-danger",
        DocumentAccessLevel.RoleBased => "bg-warning text-dark",
        DocumentAccessLevel.CustomerOnly => "bg-info",
        _ => "bg-secondary"
    };

    private string GetAgreementStatusBadge(AgreementStatus s) => s switch
    {
        AgreementStatus.Active or AgreementStatus.Renewed => "bg-success",
        AgreementStatus.Expiring => "bg-warning text-dark",
        AgreementStatus.Expired or AgreementStatus.Cancelled => "bg-danger",
        _ => "bg-secondary"
    };
}
