Assets for WebUi OneManVanFSM

### Assets Page - Exhaustive Description

**Routes**: `/assets` (list view for browsing and searching across all assets); `/assets/{id}` (detail view for a specific asset, including history, repairs, and quick actions); `/assets/new` or `/assets/{id}/edit` (create/edit view for adding or updating assets). For contextual integration, embeddable as a component or modal in related pages like Customers/Sites (e.g., `/customers/{customerId}/assets` to list only that customer's assets) or Jobs (e.g., `/jobs/{jobId}/assets` for assigning/creating assets during an install or repair job). This ensures seamless workflow—e.g., during a job execution, a tech can create a new asset from installed inventory without leaving the job page, with data transferring automatically (e.g., product details from inventory prepopulate the asset form).

**Purpose & Business Context**:
- The Assets page is designed as the comprehensive tracker for all installed or assigned equipment and items belonging to customers, serving as the "lifecycle manager" from purchase/installation through ongoing maintenance, repairs, warranties, and eventual replacement. For a small HVAC contractor, it centralizes critical details like a furnace's serial number, install date, refrigerant type, and repair history at a specific site—enabling quick decisions like "This AC unit at Rental Property B is due for warranty service" without digging through scattered notes or jobs. Presentation focuses on clarity and actionability: List views emphasize at-a-glance status (e.g., warranty badges, repair urgency), while details provide a "360-view" timeline of the asset's life, supporting proactive workflows like auto-scheduling tune-ups based on install date or usage history.
- HVAC-specific: Prioritizes elements like SEER ratings, tonnage, refrigerant compliance (e.g., R-410A tracking for EPA regs), and zone-specific details (e.g., for multi-story systems), with alerts for seasonal needs (e.g., "Filter Change Due Before Winter"). Generic foundation: Built to adapt seamlessly for other trades without structural changes—e.g., repurpose "Furnace Model" fields for "Water Heater Tank" in plumbing (capacity/gallons) or "Electrical Panel" in electrical (amp rating/circuits), using customizable fields to swap terminology while maintaining core tracking (install date, warranty, repairs). This ensures the app scales: A landlord's multi-rental assets (e.g., boilers per unit at one site, or ACs across estates) are grouped intuitively, while a company's dispersed locations (e.g., store chain with rooftop units) allow territorial filtering.
- Business value: Enhances user-friendly efficiency by eliminating data silos—e.g., an asset's repair history pulls from jobs and auto-suggests materials for future bids, reducing re-entry and errors. Industry thinking: Contractors think in terms of "equipment longevity" (e.g., track runtime hours for predictive maintenance); the page supports this with timeline views and quick links to schedule jobs or order parts. For multi-asset scenarios (e.g., one site with multiple furnaces, or a customer with estates across counties), presentation groups by site/customer/company for quick scans, with shared data flowing to financials (e.g., asset value depreciates over time for tax docs). Overall robustness: Connectivity ensures traceability (e.g., "This compressor came from inventory batch X, installed in job Y, repaired in job Z"), supporting compliance, warranties, and customer trust—key for repeat business in trades.

**Data Sources & Interconnections** (Emphasis on Connectivity Through the App):
- **Core Entity**: Assets table (ID PK, ProductID FK – from generic templates; CustomerID/CompanyID/SiteID polymorphic FKs for ownership; InstallDate, WarrantyExpiry, Serial/LotNumber, Model/Tonnage/SEER (prepopulated but customizable fields), RefrigerantType/Quantity (HVAC-specific, dropdown customizable), Status enum: Active/Maintenance Needed/Retired – customizable; Value/Depreciation (for financial tracking); Notes). One-to-Many with RepairHistory (joins to Jobs: Date/Technician/Description/PartsUsed – from material lists); WarrantyClaims (separate table: ClaimDate/Status/Notes).
- **Sources**: Prepopulates from Products (templates provide defaults like "Floor Boot 4x10x5" with specs – customizable categories); pulls usage data from InventoryItems/Logs (e.g., original stock source for traceability); customer/site/company details from their entities (e.g., auto-inherit address for geo-tagging).
- **Interconnections** (Comprehensive App-Wide Flow for Robust Data Sharing):
  - **Products (Templates/Generics)**: Many-to-One (Asset ProductID FK). Connectivity: Product template defines base attributes (e.g., model/sizes) → Creating asset clones these (prepopulates form); updates to product (e.g., spec change) prompt "Sync to Linked Assets?" (bulk update). App flow: From product detail, "Create Asset Instance" → Transfers to assets page with prepopulated fields; assets reference back for "Similar Products in Inventory" suggestions.
  - **Inventory (Stock/Source)**: One-to-Many from Products (indirect via usage logs). Connectivity: Inventory deduction during job install → Auto-creates asset (transfers lot/serial from stock to asset); asset repairs check/pull from inventory (e.g., "Suggest Replacement Parts" button queries available stock matching product ID). App flow: In inventory detail, "Assigned to Assets" section lists linked instances (clickable to asset detail); low stock alerts reference asset counts (e.g., "X Filters Needed for Y Active Assets").
  - **Customers/Companies/Sites**: Many-to-One (Asset CustomerID/CompanyID/SiteID FKs). Connectivity: Assets group by ownership (e.g., landlord's multi-estates: Filter by estate/site; company: Territorial split by contact). App flow: Customer detail "Assets Summary" embeds filtered list (with quick glances: "Most Recent Repair: Furnace at Rental A"); adding asset from customer/site page prepopulates ownership (data transfer: Site address to asset location); multi-assets per site (e.g., multiple grilles) auto-groups in views.
  - **Estimates/Jobs/MaterialLists**: Many-to-Many (via JobAssets junction or material list items). Connectivity: Material list used in job → Creates/updates asset on completion (transfers quantities/specs); job history appends to asset repairs (e.g., "Duct Sealant Applied – From Job #123"). App flow: Job execution "Assign Asset" modal pulls from inventory/products (prepopulates, deducts stock); estimate "Preview Assets" shows projected from list (data transfer to job on approval).
  - **Invoices/Expenses/ServiceAgreements**: Joins for financials (e.g., asset value to invoice for warranty claims; depreciation to expenses). Connectivity: Agreement-linked assets auto-schedule jobs (e.g., "Tune-Up Due" based on install date); invoice pulls repair history for billing justifications.
  - **QuickNotes/Documents/Employees**: Polymorphic notes/docs per asset (import quick notes for "Repair Observation"); employee tech in repair logs. Connectivity: Quick note on job → Imports to asset history if equipment-related (category match).
  - **Shared Data Flow**: Product template → Inventory stock (clone for availability) → Material list bidding (quantity check) → Job install (deduct stock, create asset with transferred specs/history) → Asset detail (ongoing repairs append jobs/logs) → Invoice/Warranty (value/history transfer) → Reports (e.g., "Asset Lifetime Cost"). For multi-site: "Batch Update" across customer's assets (e.g., update refrigerant type for all furnaces). Robust views: "AssetRepairView" (joins jobs for timelines); "InventoryToAssetView" (tracks stock origins for audits).

**Layout & Sections** (Desktop Web Focus: Timeline-Centric with Grids, Responsive for Mobile Card-Stacking):
- **List View (/assets)**: Searchable table (columns: Name/Product Link (click to template), Owner (Customer/Company/Site – clickable), Install Date/Warranty Status (badges: Active/Expiring/Expired), Recent Repair (date/link to job), Value/Status – sortable/prepopulated filters like "By Type: Furnace" dropdown customizable). Groupable by customer/site for multi-asset views. Responsive: Cards with status badges.
- **Detail View (/assets/{id})**: Comprehensive "asset profile" with tabs/accordions.
  - **Header**: Name (editable), Status Badge, Quick Actions dropdown ("Schedule Repair/New Job/Retire Asset" – prepopulates scheduler with asset details; "Link to Inventory/Product" for updates).
  - **Core Info Section**: Prepopulated fields from product (Model/Tonnage/SEER – customizable, e.g., add "Gallons" for plumbing), Install Date/Source (inventory log link), Warranty/Expiry (countdown alert), Refrigerant/Compliance (dropdowns for HVAC).
  - **Connections Accordion**: "Linked Product/Inventory" (template details/stock origin); "Owner Details" (customer/company/site links with multi-contact territorial info); "Related Assets" (e.g., grouped by site for multi-units).
  - **Repair History Timeline Section**: Chronological list/table (entries from jobs: Date/Technician/Description/Parts Used – from material lists; clickable to job detail). Quick glance: "Most Recent: Filter Replacement (Site A, 1 Month Ago)".
  - **Notes & Documents Accordion**: Quick notes feed (import for asset-specific), docs (e.g., manual/warranty cert – upload/view).
  - **Financials Accordion**: Value/Depreciation (auto-calc based on install date), Linked Invoices/Expenses (e.g., install cost from original job).
  - **Footer**: "Export History PDF/CSV", related links (e.g., "View Similar Assets" filtered by product).
- **Edit/Create View**: Form mirroring detail, with connections builder (e.g., "Select from Inventory" dropdown prepopulates matching products – customizable filters).

**UX Interactions & Flows**:
- **Creation/Assignment Flow**: On create (e.g., from job), "Select Product Template" → Prepopulates fields; "From Inventory" → Deducts stock, transfers lot/serial (data flow to asset). For multi-assets: "Batch Create" for sites (e.g., duplicate for landlord rentals).
- **Repair/History Flow**: From detail, "Add Repair" → Opens job scheduler with asset prepopulated (transfers to new job, appends history on completion).
- **List to Detail**: Filter "Expiring Warranties for Companies" → Click asset → Detail with history timeline expanded; for territorial companies: Filter by contact (e.g., show only East County assets).
- **User Journey**: Office post-install: From job completion → Embedded asset create (prepopulates from material list/inventory) → Save transfers repair history. Tech on mobile: Asset detail → "Log Repair" quick form (add note/photo) → Appends history, suggests material list import.
- **Efficiency Features**: Prepopulated dropdowns (e.g., types/status – customizable add/edit/remove); auto-alerts (e.g., "Warranty Expires in 30 Days – Schedule?"); search integrates asset serials across app.

**Customizations & Configurability**:
- Admins: Add/edit/remove fields (e.g., HVAC: Add "CFM Rating"; plumbing: Add "Flow Rate"); customize enums (e.g., Status: Add "Decommissioned"); set default filters (e.g., by trade category). Per-role: Techs view/ log repairs only (no financials); office full edit.
- Quick Notes: Import to history (e.g., "Equipment" category auto-appends as repair entry).

**Edge Cases & Robustness**:
- Multi-Asset/Site: Handle "One Site, Many Assets" (grouped timelines with filters); "Company Dispersed" (territorial access: Contact sees only their assets).
- No History: Empty state actionable (e.g., "No Repairs – Schedule First Maintenance?").
- Large Histories: Pagination in timelines (e.g., "Load More Repairs"); search within history.
- Permissions: Techs update status/notes (e.g., during repair); managers retire assets. Hidden depreciation for non-owners.
- Offline: Mobile caches assigned assets (log repairs local, sync appends history with conflict merge).

**Integrations & Automation**:
- Triggers: Warranty near-expiry → Alert (e.g., "Schedule Job for Asset X?"); repair log → Update inventory (if parts used), notify customer via email.
- External: Maps for site locations (geo-tag assets); supplier API (link lot to purchase history); PDF export for asset reports (with history for warranties).
- Workflow Ties: Quick links ensure progression (e.g., "From Asset to New Job" → Prepopulates scheduler with asset/site/customer, transferring history to job notes). For companies: Territorial notifications (e.g., alert right contact for asset issues).

**Mobile Considerations**:
- List as filterable cards (swipe to view detail/log repair); detail as vertical scroll with accordions (tap expand history). Log repair via camera/voice button; offline cache prioritizes tech's assigned assets (log local, sync creates history entries). Responsive grids stack to lists; embedded modals as bottom sheets for job-context creation, ensuring field techs can track assets hands-free without rework.