products for WebUi OneManVanFSM

### Products Page - Exhaustive Description

**Routes**: `/products` (list view for browsing and searching all product templates); `/products/{id}` (detail view for a specific product, including usage history, linked instances, and quick actions); `/products/new` or `/products/{id}/edit` (create/edit view for adding or updating product templates). For contextual integration, embeddable as a component or modal in related pages like Inventory (e.g., `/inventory/new?fromProduct={id}` to create stock from a product template) or Material Lists Builder (e.g., `/materiallists/{listId}/products` to search and add products during bidding). This ensures seamless workflow—e.g., while building a material list for a job, search and add a product like "UL 181A Foil Tape" without leaving, with data (cost, unit, specs) transferring directly to the list item, minimizing switches and re-entry for the contractor.

**Purpose & Business Context**:
- The Products page is conceptualized as the foundational "catalog manager" for all generic, templated items that serve as blueprints for real-world use—defining standard parts, equipment, and supplies before they're stocked in inventory or installed as assets. For a small HVAC contractor, it streamlines bidding and operations by providing reusable templates (e.g., "6" Flex Duct: 25ft Boxes" with predefined cost, markup, and specs like CFM compatibility), ensuring consistency across estimates, jobs, and repairs—e.g., avoid mismatched parts by prepopulating compatible options based on system type. Presentation emphasizes templating: List views show at-a-glance usage (e.g., "This compressor template used in 5 assets this month"), while details offer a "template profile" with customization for variants (e.g., different sizes or materials).
- HVAC-specific: Focuses on detailed specs like tonnage/SEER for AC units, refrigerant types for compliance, or material ratings (e.g., UL 181A for tape)—with fields for energy efficiency or code adherence that auto-suggest in bids. Generic foundation: Designed for easy adaptation to other trades without app rework—e.g., repurpose "Duct Sizes" fields for "Pipe Diameters" in plumbing (1/2" copper with flow ratings) or "Wire Gauges" in electrical (AWG with ampacity), using customizable categories to swap attributes while keeping core templating (cost/unit/markup). This supports scenarios like a landlord's multi-rental setups (e.g., standard filter templates forked for each unit's asset) or a company's chain locations (e.g., uniform rooftop unit templates shared across territorial contacts).
- Business value: Promotes user-friendly efficiency by acting as the "source of truth" for shared data—e.g., update a product's cost once, and it propagates to linked inventory stock, material lists, assets, and invoices (no manual syncing). Industry thinking: Contractors rely on standard catalogs to speed bids (e.g., prepopulated "Floor Boot 4x10x5" saves time over manual entry); the page supports this with quick cloning for variants and connectivity to prevent overstocking (e.g., "This template overused—check inventory?"). For multi-asset customers/companies (e.g., estates with multiple furnaces per site), products enable "kit templating" (group related items like grilles + returns), with data flowing to customer summaries for glances like "Standard Assets from This Template: 10 Across Sites". Overall robustness: Ensures traceability and compliance (e.g., product specs transfer to asset warranties for easy claims), reducing errors in workflows like bidding to installation.

**Data Sources & Interconnections**:
- **Core Entity**: Products table (ID PK, Name, Category enum: Ductwork/Equipment/Sealing – customizable; Cost/Price/Markup (supports time-based: Materials + Labor est.; flat rate: Fixed – switchable); Specs JSON/array (e.g., Sizes: 5"-18", Units: Count/Boxes/Ft – prepopulated but customizable); SupplierID FK for reorders; Notes/Attachments for manuals). IsTemplate flag default true; Variants as child records or JSON for sub-types (e.g., "Flex Duct" with size-specific entries).
- **Sources**: Prepopulates from Suppliers/Vendors (if integrated, for cost defaults and reorder links); customizable settings for categories/units/specs (e.g., admin adds "Plumbing: Pipe Lengths").
- **Interconnections** (Comprehensive App-Wide Flow for Shared Templating):
  - **Inventory (Stock Instances)**: One-to-Many (InventoryItem ProductID FK). Connectivity: Product as template defines attributes (e.g., cost/unit/category) → "Create Stock from Template" transfers these to new inventory item (prepopulates quantity/threshold); inventory adjustments (e.g., price from supplier) prompt "Update Product Template?" (reverse sync). App flow: From product detail, "Add to Inventory" opens inventory create with data transfer; inventory low alerts reference product usage (e.g., "Template Over-Demanded—Reorder Base Items?").
  - **Assets (Installed Instances)**: One-to-Many (Asset ProductID FK). Connectivity: Product template provides blueprint (e.g., specs like tonnage/SEER) → Job install creates asset from inventory (transfers product ID/specs, adds install-specific like serial); asset updates (e.g., post-repair spec change) can "Propagate Back to Template" for variants. App flow: Asset create/search pulls from products (prepopulates form); product detail "Linked Assets" section lists instances (clickable to asset detail, with filters like "By Customer Site"); multi-assets per site/customer (e.g., group "20x20 Returns" templates for landlord rentals).
  - **Material Lists/Estimates/Jobs**: Many-to-Many (via MaterialListItems ProductID FK). Connectivity: Product search in material builder prepopulates items (e.g., "Take Offs: Sizes 5/6/7" with count fields); list import to job deducts inventory and creates assets (data transfer: Product specs to asset fields). App flow: Job "Add from Product Catalog" embeds search (transfers to material list, then asset on completion); estimate totals use product markup (switchable time/flat).
  - **Customers/Companies/Sites**: Indirect via assets (e.g., product "Used in X Assets for Customer Y"). Connectivity: Customer detail "Suggested Products" pulls from asset history (e.g., "Compatible Filters for Existing Furnaces"); for companies/landlords, product variants filter by territorial/site (e.g., "East County Standard Kits"). App flow: From customer assets summary, "Create from Template" opens product-linked asset create.
  - **Invoices/Expenses/ServiceAgreements**: Joins for costing (e.g., product price/markup to invoice lines from assets/jobs); agreements suggest product-based kits (e.g., "Quarterly Filter Replacement" template).
  - **QuickNotes/Documents/Employees**: Notes/docs per product (e.g., import quick note as "Variant Spec"); employee repair logs reference product in asset history.
  - **Shared Data Flow**: Product template creation (define specs/cost) → Add to inventory (transfer for stock) → Use in material list/job (quantity check/deduct, transfer to estimate totals) → Install as asset (create instance with transferred specs/history) → Repair/job (update asset, suggest product variants) → Invoice billing (cost from product, history from asset) → Reports (e.g., "Product Usage Across Assets"). For multi-site: "Fork Variant" creates site-specific templates (data transfer from base). Robust views: "ProductUsageView" (joins inventory/assets/jobs for trends); "TemplateToInstanceView" (tracks from generic to assigned for audits).

**Layout & Sections** (Desktop Web Focus: Catalog-Style with Previews, Responsive for Mobile Card-Stacking):
- **List View (/products)**: Searchable table (columns: Name/Category (dropdown filter – customizable), Specs Snippet (e.g., "Sizes: 5"-18""), Cost/Price/Markup (switchable time/flat), Usage Count (linked assets/inventory/lists), Variants Count – sortable/prepopulated like "HVAC Equipment" dropdown). Groupable by category for catalog feel. Responsive: Cards with spec previews.
- **Detail View (/products/{id})**: Template-focused summary.
  - **Header**: Name (editable), Category Badge, Quick Actions dropdown ("Create Variant/New Inventory/Asset" – prepopulates forms with data transfer; "Link to Material List/Job" for usage).
  - **Core Specs Section**: Editable fields (prepopulated dropdowns like Units: Count/Boxes – customizable), Cost/Price/Markup (time: Breakdown; flat: Fixed), Attachments (e.g., manual PDF).
  - **Variants Accordion**: Table of sub-types (e.g., "Flex Duct 6"": Specific Cost" – add/edit inline).
  - **Connections Accordion**: "Linked Inventory" (stock instances with quantities); "Linked Assets" (installed with sites/customers – filterable by company territory); "Usage in Lists/Jobs" (recent with links).
  - **Notes & Documents Accordion**: Quick notes feed (import for spec updates), docs (e.g., compliance certs).
  - **Footer**: "Export Catalog PDF/CSV", related links (e.g., "View Similar by Category" filtered).
- **Edit/Create View**: Form with variant builder (e.g., "Add Size Variant" dynamic rows).

**UX Interactions & Flows**:
- **Template Management Flow**: On create/edit, add specs (dropdowns prepopulate customizable options) → "Create Variant" duplicates with overrides; "Propagate to Linked" updates inventory/assets.
- **Connections Flow**: From detail, "Create Asset" → Opens asset form with data transfer (specs to fields); usage in job auto-links back (appends to "Linked Jobs").
- **List to Detail**: Filter "Ductwork Templates" → Click product → Detail with connections expanded; for companies, filter shows "Used in Territorial Assets".
- **User Journey**: Office cataloging: Create "Return Grille 20x20" template → Add to inventory. Tech install: From job, embedded product search → Select template → Create asset (transfer specs), deduct inventory.
- **Efficiency Features**: Prepopulated dropdowns (categories/specs – customizable add/edit/remove); auto-suggest variants (e.g., based on past assets); bulk propagate (e.g., price update to all linked).

**Customizations & Configurability**:
- Admins: Add/edit/remove dropdowns (e.g., Categories: Add "Plumbing"; Specs: Add "Amp Rating" for electrical); set default pricing method; toggle fields (e.g., hide SEER for non-HVAC). Per-role: Techs view specs only (no costs); office edit templates.
- Quick Notes: Import to notes (e.g., "Variant" category auto-creates sub-type).

**Edge Cases & Robustness**:
- Multi-Variants: Handle "One Product, Many Variants" (e.g., Flex Duct sizes – tabbed views); "Company Shared" (territorial access: Contact edits only their variants).
- No Links: Empty state actionable (e.g., "No Linked Assets – Assign One?").
- Large Catalogs: Pagination/filters (e.g., "By Usage Count"); search with specs (e.g., "SEER >16").
- Permissions: Techs create variants from jobs (limited fields); managers propagate updates. Hidden costs for non-bidders.
- Offline: Mobile caches frequently used templates (create variants local, sync links with merge).

**Integrations & Automation**:
- Triggers: Spec update → Alert (e.g., "Propagate to 5 Assets?"); high usage → Reorder suggestion (links to inventory).
- External: Supplier API (pull spec updates); PDF export for catalogs (with variants for bids).
- Workflow Ties: Quick links ensure progression (e.g., "From Product to Material List" → Prepopulates builder item, transferring specs/unit). For companies: Territorial filters (e.g., show East County variants for John Doe).

**Mobile Considerations**:
- List as filterable cards (swipe to view variants/create instance); detail as vertical scroll with accordions (tap expand connections). Create variant via voice/scan button; offline cache prioritizes job-relevant templates (create local, sync creates links/assets). Responsive grids stack to lists; embedded search as bottom sheet for material list context, ensuring techs can reference products hands-free without rework.